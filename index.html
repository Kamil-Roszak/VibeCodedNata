<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Nata World</title>
    <link rel="stylesheet" href="css/ui.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/match3.css">
</head>
<body>
    <div id="bg-container"></div>

    <header class="app-header">
        <div class="logo-small">NATA COLA</div>
        <div class="user-stats">Points: <span id="user-points-display">0</span></div>
    </header>

    <main id="app-container">
        <!-- Main Menu -->
        <section id="menu-view" class="view-section active-view">
            <div class="menu-content nata-overlay visible" style="position: relative; top: auto; left: auto; transform: none; margin-top: 50px;">
                <img src="assets/nata_logo.svg" alt="Nata Logo" class="main-logo">
                <h1>NATA WORLD</h1>
                <div class="menu-buttons">
                    <button class="nata-btn nata-btn-primary" data-nav="game-view">PLAY NATA CATCH</button>
                    <button class="nata-btn nata-btn-primary" data-nav="level-select-view">PLAY NATA CRUSH</button>
                    <button class="nata-btn nata-btn-secondary" data-nav="shop-view">BADGE SHOP</button>
                    <button class="nata-btn nata-btn-secondary" data-nav="profile-view">MY PROFILE</button>
                </div>
            </div>
        </section>

        <!-- Game View (Nata Catch) -->
        <section id="game-view" class="view-section hidden-view">
            <button class="nata-btn nata-btn-secondary" style="position: absolute; top: 60px; left: 20px; z-index: 200; padding: 5px 15px; font-size: 14px;" data-nav="menu-view">Exit</button>
            <div id="gameContainer">
                <canvas id="gameCanvas"></canvas>

                <div id="hud" class="hidden">
                    <div id="scoreBoard">SCORE: <span id="score">0</span></div>
                    <button id="audioBtn">üîä</button>
                    <div id="livesBoard"><span id="lives">‚ù§‚ù§‚ù§</span></div>
                </div>

                <div id="startScreen" class="nata-overlay visible">
                    <h2>Nata Catch</h2>
                    <p>Move the crate to catch the bottles!</p>
                    <button id="startBtn" class="nata-btn nata-btn-primary">START GAME</button>
                </div>

                <div id="gameOverScreen" class="nata-overlay">
                    <h1>Game Over!</h1>
                    <p>Score: <span id="finalScore">0</span></p>
                    <div class="button-group">
                        <button id="restartBtn" class="nata-btn nata-btn-primary">RETRY</button>
                        <button id="backToMenuBtn" class="nata-btn nata-btn-secondary">MENU</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Shop View -->
        <section id="shop-view" class="view-section hidden-view">
            <div class="nata-view-header">
                <button class="nata-btn nata-btn-secondary" style="padding: 5px 15px; font-size: 14px;" data-nav="menu-view">‚Üê Back</button>
                <h2 class="nata-view-title">Badge Shop</h2>
            </div>
            <div id="shop-list" class="nata-grid-shop">
                <!-- Populated by JS -->
            </div>
        </section>

        <!-- Profile View -->
        <section id="profile-view" class="view-section hidden-view">
            <div class="nata-view-header">
                <button class="nata-btn nata-btn-secondary" style="padding: 5px 15px; font-size: 14px;" data-nav="menu-view">‚Üê Back</button>
                <h2 class="nata-view-title">My Profile</h2>
            </div>
            <div class="profile-content nata-card" style="margin-top: 20px; width: 90%; max-width: 600px;">
                <div class="profile-header">
                    <h3>Player Stats</h3>
                    <p>Total Points Earned: <span id="profile-total-points" class="nata-header-badge">0</span></p>
                </div>
                <h3>My Badges</h3>
                <div id="profile-badges" class="badges-grid">
                    <!-- Populated by JS -->
                </div>
            </div>
        </section>

        <!-- Match 3 Level Select View -->
        <section id="level-select-view" class="view-section hidden-view">
            <div class="nata-view-header">
                <button class="nata-btn nata-btn-secondary" style="padding: 5px 15px; font-size: 14px;" data-nav="menu-view">‚Üê Back</button>
                <h2 class="nata-view-title">Nata Crush</h2>
            </div>
            <div id="level-map" class="level-scroll-container">
                <!-- Populated by JS -->
            </div>
        </section>

        <!-- Match 3 Game View -->
        <section id="match3-view" class="view-section hidden-view">
            <button class="nata-btn nata-btn-secondary" id="exitMatch3Btn" style="position: absolute; top: 60px; left: 20px; z-index: 200; padding: 5px 15px; font-size: 14px;">Exit</button>
            <div id="match3Container">
                <canvas id="match3Canvas"></canvas>

                <div id="match3-hud">
                    <div class="nata-header-badge">Moves: <span id="m3-moves">0</span></div>
                    <div class="nata-header-badge">Score: <span id="m3-score">0</span> / <span id="m3-target">0</span></div>
                </div>

                <div id="match3-start" class="nata-overlay visible">
                    <h2>Level <span id="m3-level-num">1</span></h2>
                    <p>Target: <span id="m3-start-target">1000</span></p>
                    <button id="m3-play-btn" class="nata-btn nata-btn-primary">START</button>
                </div>

                <div id="match3-end" class="nata-overlay">
                    <h1 id="m3-end-title">You Win!</h1>
                    <div id="m3-stars" style="font-size: 30px; margin-bottom: 10px;">‚≠ê‚≠ê‚≠ê</div>
                    <p>Score: <span id="m3-end-score">0</span></p>
                    <button id="m3-next-btn" class="nata-btn nata-btn-primary">CONTINUE</button>
                </div>
            </div>
        </section>
    </main>

    <!-- Scripts -->
    <script src="vendor/three.min.js"></script>
    <script src="js/three-bg.js"></script>
    <script src="js/game-natacatch.js"></script>

    <!-- Match 3 Scripts -->
    <script src="js/assets-match3.js"></script>
    <script src="js/level-generator.js"></script>
    <script src="js/game-match3-logic.js"></script>
    <script src="js/game-match3-render.js"></script>
    <script src="js/view-levelselect.js"></script>

    <script src="js/app.js"></script>
</body>
</html>
