<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Nata World</title>
    <link rel="stylesheet" href="css/ui.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/match3.css">
    <link rel="stylesheet" href="css/balatro.css">
</head>
<body>
    <div id="bg-container"></div>

    <header class="app-header">
        <div class="logo-small">NATA COLA</div>
        <div class="user-stats">Points: <span id="user-points-display">0</span></div>
    </header>

    <main id="app-container">
        <!-- Main Menu -->
        <section id="menu-view" class="view-section active-view">
            <div class="menu-content nata-overlay visible" style="position: relative; top: auto; left: auto; transform: none; margin-top: 50px;">
                <img src="assets/nata_logo.svg" alt="Nata Logo" class="main-logo">
                <h1>NATA WORLD</h1>
                <div class="menu-buttons">
                    <button class="nata-btn nata-btn-primary" data-nav="game-view">PLAY NATA CATCH</button>
                    <button class="nata-btn nata-btn-primary" data-nav="level-select-view">PLAY NATA CRUSH</button>
                    <button class="nata-btn nata-btn-blue" data-nav="balatro-view">PLAY NATA POKER</button>
                    <button class="nata-btn nata-btn-secondary" data-nav="shop-view">BADGE SHOP</button>
                    <button class="nata-btn nata-btn-secondary" data-nav="profile-view">MY PROFILE</button>
                </div>
            </div>
        </section>

        <!-- Nata Poker (Balatro) View -->
        <section id="balatro-view" class="view-section hidden-view">
            <button class="nata-btn nata-btn-secondary" style="position: absolute; top: 60px; left: 20px; z-index: 200; padding: 5px 15px; font-size: 14px;" data-nav="menu-view">Exit</button>

            <div class="balatro-container">
                <canvas id="balatro-canvas"></canvas>
                <!-- Top: Jokers -->
                <div class="balatro-top-bar">
                    <div id="b-jokers-area" class="joker-slots">
                        <!-- Filled by JS -->
                    </div>
                    <div id="b-consumables-area" class="consumable-slots">
                        <!-- Consumables -->
                    </div>
                    <div class="round-info">
                        <div class="info-box">
                            <span class="label">Round</span>
                            <span id="b-round" class="value">1</span>
                        </div>
                        <div class="info-box">
                            <span class="label">Money</span>
                            <span id="b-money" class="value">$0</span>
                        </div>
                    </div>
                </div>

                <!-- Middle: Score -->
                <div class="balatro-score-area">
                    <div id="b-hand-preview" class="hand-preview-box hidden">
                        <div class="hand-name" id="b-preview-name">High Card</div>
                        <div class="hand-level" id="b-preview-level">lvl.1</div>
                        <div class="hand-score">
                            <span id="b-preview-chips" class="score-chips">10</span>
                            <span class="x">X</span>
                            <span id="b-preview-mult" class="score-mult">1</span>
                        </div>
                    </div>

                    <div class="score-display">
                        <div class="score-row">
                            <span id="b-chips" class="score-chips">0</span>
                            <span class="x">X</span>
                            <span id="b-mult" class="score-mult">0</span>
                        </div>
                        <div class="score-total" id="b-current-score">0</div>
                    </div>
                    <div class="target-display">
                        Target: <span id="b-target-score">300</span>
                    </div>
                </div>

                <!-- Bottom: Play Area & Hand -->
                <div class="balatro-play-area">
                    <!-- Cards selected to play appear here visually? Or just highlighted in hand?
                         Balatro moves them up. Let's replicate that. -->
                    <div id="b-play-slots" class="card-row play-slots"></div>

                    <div class="action-row">
                        <div id="b-deck-area"></div>

                        <div class="action-buttons">
                            <button id="b-play-btn" class="nata-btn nata-btn-primary">PLAY HAND (<span id="b-hands-left">4</span>)</button>
                            <button id="b-discard-btn" class="nata-btn nata-btn-secondary">DISCARD (<span id="b-discards-left">4</span>)</button>
                        </div>

                        <div class="sort-buttons control-panel">
                            <button id="b-sort-rank" class="nata-btn nata-btn-blue" style="font-size: 12px; padding: 5px 15px;">Sort Rank</button>
                            <button id="b-sort-suit" class="nata-btn nata-btn-blue" style="font-size: 12px; padding: 5px 15px;">Sort Suit</button>
                        </div>
                    </div>

                    <div id="b-hand-area" class="card-row hand-area">
                        <!-- Cards -->
                    </div>
                </div>

                <!-- Shop Overlay -->
                <div id="b-shop-overlay" class="nata-overlay" style="width: 80%; max-width: 800px;">
                    <h1>Nata Shop</h1>
                    <p>Money: <span id="b-shop-money">$0</span></p>
                    <div id="b-shop-items" class="shop-items-grid"></div>
                    <button id="b-next-round-btn" class="nata-btn nata-btn-primary">NEXT ROUND</button>
                </div>

                <!-- Game Over Overlay -->
                <div id="b-game-over" class="nata-overlay">
                    <h1>Game Over</h1>
                    <p>Round Reached: <span id="b-final-round">1</span></p>
                    <button onclick="startBalatro()" class="nata-btn nata-btn-primary">TRY AGAIN</button>
                    <button data-nav="menu-view" class="nata-btn nata-btn-secondary">MENU</button>
                </div>

                <!-- Blind Select Overlay -->
                <div id="b-blind-select" class="nata-overlay">
                    <h1>Select Blind</h1>
                    <div class="blind-info-card">
                        <h2 id="b-blind-name">Small Blind</h2>
                        <p id="b-blind-desc">Score at least 300 chips</p>
                        <div class="blind-reward">Reward: $<span id="b-blind-reward">3</span></div>
                    </div>
                    <div class="blind-actions">
                        <button id="b-select-play" class="nata-btn nata-btn-primary">SELECT</button>
                        <div class="skip-option">
                            <button id="b-select-skip" class="nata-btn nata-btn-secondary">SKIP</button>
                            <div class="tag-reward">Tag: <span id="b-tag-name">Free Shop</span></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Game View (Nata Catch) -->
        <section id="game-view" class="view-section hidden-view">
            <button class="nata-btn nata-btn-secondary" style="position: absolute; top: 60px; left: 20px; z-index: 200; padding: 5px 15px; font-size: 14px;" data-nav="menu-view">Exit</button>
            <div id="gameContainer">
                <canvas id="gameCanvas"></canvas>

                <div id="hud" class="hidden">
                    <div id="scoreBoard">SCORE: <span id="score">0</span></div>
                    <button id="audioBtn">üîä</button>
                    <div id="livesBoard"><span id="lives">‚ù§‚ù§‚ù§</span></div>
                </div>

                <div id="startScreen" class="nata-overlay visible">
                    <h2>Nata Catch</h2>
                    <p>Move the crate to catch the bottles!</p>
                    <button id="startBtn" class="nata-btn nata-btn-primary">START GAME</button>
                </div>

                <div id="gameOverScreen" class="nata-overlay">
                    <h1>Game Over!</h1>
                    <p>Score: <span id="finalScore">0</span></p>
                    <div class="button-group">
                        <button id="restartBtn" class="nata-btn nata-btn-primary">RETRY</button>
                        <button id="backToMenuBtn" class="nata-btn nata-btn-secondary">MENU</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Shop View -->
        <section id="shop-view" class="view-section hidden-view">
            <div class="nata-view-header">
                <button class="nata-btn nata-btn-secondary" style="padding: 5px 15px; font-size: 14px;" data-nav="menu-view">‚Üê Back</button>
                <h2 class="nata-view-title">Badge Shop</h2>
            </div>
            <div id="shop-list" class="nata-grid-shop">
                <!-- Populated by JS -->
            </div>
        </section>

        <!-- Profile View -->
        <section id="profile-view" class="view-section hidden-view">
            <div class="nata-view-header">
                <button class="nata-btn nata-btn-secondary" style="padding: 5px 15px; font-size: 14px;" data-nav="menu-view">‚Üê Back</button>
                <h2 class="nata-view-title">My Profile</h2>
            </div>
            <div class="profile-content nata-card" style="margin-top: 20px; width: 90%; max-width: 600px;">
                <div class="profile-header">
                    <h3>Player Stats</h3>
                    <p>Total Points Earned: <span id="profile-total-points" class="nata-header-badge">0</span></p>
                </div>
                <h3>My Badges</h3>
                <div id="profile-badges" class="badges-grid">
                    <!-- Populated by JS -->
                </div>
            </div>
        </section>

        <!-- Match 3 Level Select View -->
        <section id="level-select-view" class="view-section hidden-view">
            <div class="nata-view-header">
                <button class="nata-btn nata-btn-secondary" style="padding: 5px 15px; font-size: 14px;" data-nav="menu-view">‚Üê Back</button>
                <h2 class="nata-view-title">Nata Crush</h2>
            </div>
            <div id="level-map" class="level-scroll-container">
                <!-- Populated by JS -->
            </div>
        </section>

        <!-- Match 3 Game View -->
        <section id="match3-view" class="view-section hidden-view">
            <button class="nata-btn nata-btn-secondary" id="exitMatch3Btn" style="position: absolute; top: 60px; left: 20px; z-index: 200; padding: 5px 15px; font-size: 14px;">Exit</button>
            <div id="match3Container">
                <canvas id="match3Canvas"></canvas>

                <div id="match3-hud">
                    <div class="nata-header-badge">Moves: <span id="m3-moves">0</span></div>
                    <div class="nata-header-badge">Score: <span id="m3-score">0</span> / <span id="m3-target">0</span></div>
                </div>

                <div id="match3-start" class="nata-overlay visible">
                    <h2>Level <span id="m3-level-num">1</span></h2>
                    <p>Target: <span id="m3-start-target">1000</span></p>
                    <button id="m3-play-btn" class="nata-btn nata-btn-primary">START</button>
                </div>

                <div id="match3-end" class="nata-overlay">
                    <h1 id="m3-end-title">You Win!</h1>
                    <div id="m3-stars" style="font-size: 30px; margin-bottom: 10px;">‚≠ê‚≠ê‚≠ê</div>
                    <p>Score: <span id="m3-end-score">0</span></p>
                    <button id="m3-next-btn" class="nata-btn nata-btn-primary">CONTINUE</button>
                </div>
            </div>
        </section>
    </main>

    <!-- Scripts -->
    <script src="vendor/three.min.js"></script>
    <script src="js/three-bg.js"></script>
    <script src="js/game-natacatch.js"></script>

    <!-- Match 3 Scripts -->
    <script src="js/assets-match3.js"></script>
    <script src="js/level-generator.js"></script>
    <script src="js/game-match3-logic.js"></script>
    <script src="js/game-match3-render.js"></script>
    <script src="js/view-levelselect.js"></script>

    <!-- Balatro Scripts -->
    <script src="js/balatro-data.js"></script>
    <script src="js/game-balatro-poker.js"></script>
    <script src="js/game-balatro-core.js"></script>
    <!-- <script src="js/game-balatro-view.js"></script> -->
    <script src="js/game-balatro-three-view.js"></script>

    <script src="js/app.js"></script>
</body>
</html>
